<div class="p-2">
  <div class="col-lg-12">
    <div class="row center">
      <mat-card class="card">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <h2 class="head">ประเทศไทย</h2>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p class="text-right margin-text">{{ localLastUpdated }}</p>
          </div>
        </div>  
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">ผู้ติดเชื้อ</h3>
                <p class="infected-person text-center">{{ totalLocal.confirmed.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">กำลังอยู่ในการรักษา</h3>
                <p class="infected-person text-center">{{ totalLocal.healings.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">รักษาหายแล้ว</h3>
                <p class="infected-person text-center">{{ totalLocal.recovered.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">เสียชีวิต</h3>
                <p class="infected-person text-center">{{ totalLocal.deaths.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>

          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <h3 class="text-center">เปรียบเทียบอัตราส่วน</h3>
                <canvas baseChart
                  [options]="pieChartOptions"
                  [data]="pieChartDataLocal"
                  [labels]="pieChartLabels"
                  [chartType]="pieChartType"
                  [colors]="pieChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <h3 class="text-center">ข้อมูลย้อนหลัง 7 วัน</h3>
                <canvas baseChart
                  [datasets]="barChartDataLocal"
                  [labels]="barChartLabels"
                  [options]="barChartOptions"
                  [chartType]="barChartType"
                  [colors]="barChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <h3 class="text-center">สถานที่ตรวจหาโรค/รักษา ({{ hospitals.length || 0}} แห่ง)</h3>
                <agm-map [latitude]="latitude" [longitude]="longitude" [zoom]="12">
                  <agm-marker 
                    *ngFor="let hospital of hospitals; let i = index" 
                    [latitude]="hospital.latitude" 
                    [longitude]="hospital.longitude" 
                    [label]="i + 1">
                    <agm-info-window>
                      <h5>{{ hospital.name }}</h5>
                      <p>ที่อยู่: {{ hospital.address }}</p>
                      <p>เบอร์โทร: {{ hospital.phone }}</p>
                      <strong>{{ hospital.estimated_examination_fees }}</strong>
                    </agm-info-window>
                  </agm-marker>
                </agm-map>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <h3 class="text-center">ข้อมูลผู้ป่วยในประเทศที่ยืนยันแล้ว ({{ patientInformationCount }} คน)</h3>
                <div class="mat-elevation-z8">
                  <table mat-table [dataSource]="patientInformationDataSource">

                    <ng-container matColumnDef="detected_at">
                      <th mat-header-cell *matHeaderCellDef> ตรวจเจอที่ </th>
                      <td mat-cell *matCellDef="let element"> {{element.detected_at}} </td>
                    </ng-container>

                    <ng-container matColumnDef="origin">
                      <th mat-header-cell *matHeaderCellDef> มาจาก </th>
                      <td mat-cell *matCellDef="let element"> {{element.origin}} </td>
                    </ng-container>

                    <ng-container matColumnDef="treat_at">
                      <th mat-header-cell *matHeaderCellDef> รักษาที่ </th>
                      <td mat-cell *matCellDef="let element"> {{element.treat_at}} </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                      <th mat-header-cell *matHeaderCellDef> สถานะ </th>
                      <td mat-cell *matCellDef="let element"> {{element.status}} </td>
                    </ng-container>

                    <ng-container matColumnDef="job">
                      <th mat-header-cell *matHeaderCellDef> อาชีพ </th>
                      <td mat-cell *matCellDef="let element"> {{element.job}} </td>
                    </ng-container>

                    <ng-container matColumnDef="gender">
                      <th mat-header-cell *matHeaderCellDef> เพศ </th>
                      <td mat-cell *matCellDef="let element"> {{element.gender}} </td>
                    </ng-container>

                    <ng-container matColumnDef="age">
                      <th mat-header-cell *matHeaderCellDef> อายุ (ปี) </th>
                      <td mat-cell *matCellDef="let element"> {{element.age}} </td>
                    </ng-container>

                    <ng-container matColumnDef="type">
                      <th mat-header-cell *matHeaderCellDef> ประเภท </th>
                      <td mat-cell *matCellDef="let element"> {{element.type}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="patientInformationDisplayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: patientInformationDisplayedColumns;"></tr>
                  </table>

                  <mat-paginator #patientInformationPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
        
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <h2 class="head">ทั่วโลก</h2>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p class="text-right margin-text">{{ globleLastUpdated }}</p>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">ผู้ติดเชื้อ</h3>
                <p class="infected-person text-center">{{ total.confirmed.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">กำลังอยู่ในการรักษา</h3>
                <p class="infected-person text-center">{{ total.healings.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">รักษาหายแล้ว</h3>
                <p class="infected-person text-center">{{ total.recovered.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <h3 class="text-center">เสียชีวิต</h3>
                <p class="infected-person text-center">{{ total.deaths.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <h3 class="text-center">เปรียบเทียบอัตราส่วน</h3>
                <canvas baseChart
                  [options]="pieChartOptions"
                  [data]="pieChartData"
                  [labels]="pieChartLabels"
                  [chartType]="pieChartType"
                  [colors]="pieChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <h3 class="text-center">ข้อมูลย้อนหลัง 7 วัน</h3>
                <canvas baseChart
                  [datasets]="barChartData"
                  [labels]="barChartLabels"
                  [options]="barChartOptions"
                  [chartType]="barChartType"
                  [colors]="barChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <h3 class="text-center">แยกประเทศ</h3>
                <div class="mat-elevation-z8">
                  <table mat-table [dataSource]="allCountryDataSource">

                    <ng-container matColumnDef="country">
                      <th mat-header-cell *matHeaderCellDef> ประเทศ </th>
                      <td mat-cell *matCellDef="let element"> {{element.country}} </td>
                    </ng-container>

                    <ng-container matColumnDef="travel">
                      <th mat-header-cell *matHeaderCellDef> การเดินทาง </th>
                      <td mat-cell *matCellDef="let element"> {{element.travel}} </td>
                    </ng-container>

                    <ng-container matColumnDef="confirmed">
                      <th mat-header-cell *matHeaderCellDef> ติดเชื้อ </th>
                      <td mat-cell *matCellDef="let element"> {{element.confirmed}} </td>
                    </ng-container>

                    <ng-container matColumnDef="healings">
                      <th mat-header-cell *matHeaderCellDef> กำลังอยู่ในการรักษา </th>
                      <td mat-cell *matCellDef="let element"> {{element.healings}} </td>
                    </ng-container>

                    <ng-container matColumnDef="recovered">
                      <th mat-header-cell *matHeaderCellDef> หายแล้ว </th>
                      <td mat-cell *matCellDef="let element"> {{element.recovered}} </td>
                    </ng-container>

                    <ng-container matColumnDef="deaths">
                      <th mat-header-cell *matHeaderCellDef> เสียชีวิต </th>
                      <td mat-cell *matCellDef="let element"> {{element.deaths}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="allCountryDisplayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: allCountryDisplayedColumns;"></tr>
                  </table>

                  <mat-paginator #allCountryPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-qr-code">
              <mat-card-content>
                <h3 class="text-center">Line Bot QR Code</h3>
                <img src="/LineBotQRCode.png" class="qrcode">
                <p class="text-center">Line Bot ชื่อ : Covid19</p>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center">พัฒนาโดย 
                  <a href="https://github.com/Saharak-Dove"><strong>Saharak Manoo</strong></a> 
                  ใช้ข้อมูลจาก <a href="https://github.com/CSSEGISandData/COVID-19">CSSEGISandData</a>
                  และ <a href="https://covid19.workpointnews.com/">Workpointnews</a>
                </p>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>