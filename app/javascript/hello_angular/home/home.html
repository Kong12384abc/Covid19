<div class="p-2">
  <div class="col-lg-12">
    <div class="row center">
      <mat-card class="card">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <h2 class="head">ประเทศไทย</h2>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p class="text-right margin-text">{{ localLastUpdated }}</p>
          </div>
        </div>  
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <p class="text-center font-size-26">ผู้ติดเชื้อ <strong class="font-size-14">(เพิ่มขึ้น <strong class="font-size-16 color-red">{{ localAddTodayCount }}</strong> คน)</strong></p>
                <p class="infected-person confirmed text-center">{{ totalLocal.confirmed.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <p class="text-center font-size-26">กำลังอยู่ในการรักษา</p>
                <p class="infected-person healings text-center">{{ totalLocal.healings.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <p class="text-center font-size-26">รักษาหายแล้ว</p>
                <p class="infected-person recovered text-center">{{ totalLocal.recovered.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <p class="text-center font-size-26">เสียชีวิต</p>
                <p class="infected-person deaths text-center">{{ totalLocal.deaths.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>

          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center font-size-26">เปรียบเทียบอัตราส่วน</p>
                <canvas baseChart
                  [options]="pieChartOptions"
                  [data]="pieChartDataLocal"
                  [labels]="pieChartLabels"
                  [chartType]="pieChartType"
                  [colors]="pieChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center font-size-26">ข้อมูลย้อนหลัง <strong class="font-size-26 color-7">7</strong> วัน</p>
                <canvas baseChart
                  [datasets]="barChartDataLocal"
                  [labels]="barChartLabels"
                  [options]="barChartOptions"
                  [chartType]="barChartType"
                  [colors]="barChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center font-size-26">สถานที่ตรวจหาโรค/รักษา ({{ hospitals.length || 0}} แห่ง)</p>
                <agm-map [latitude]="latitude" [longitude]="longitude" [zoom]="12">
                  <agm-marker 
                    *ngFor="let hospital of hospitals; let i = index" 
                    [latitude]="hospital.latitude" 
                    [longitude]="hospital.longitude" 
                    [label]="i + 1">
                    <agm-info-window>
                      <h5>{{ hospital.name }}</h5>
                      <p>ที่อยู่: {{ hospital.address }}</p>
                      <p>เบอร์โทร: {{ hospital.phone }}</p>
                      <strong>{{ hospital.estimated_examination_fees }}</strong>
                    </agm-info-window>
                  </agm-marker>
                </agm-map>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center font-size-26">ข้อมูลผู้ป่วยในประเทศที่ยืนยันแล้ว ({{ patientInformationCount }} คน)</p>
                <mat-form-field>
                  <mat-label>ค้นหา...</mat-label>
                  <input matInput (keyup)="searchPatientInformation($event)" placeholder="ตัวอย่าง. เชียงใหม่">
                </mat-form-field>

                <div class="mat-elevation-z8">
                  <table mat-table #patientInformation [dataSource]="patientInformationDataSource" matSort>

                    <ng-container matColumnDef="detected_at">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> ตรวจเจอที่ </th>
                      <td mat-cell *matCellDef="let element"> {{element.detected_at}} </td>
                    </ng-container>

                    <ng-container matColumnDef="origin">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> มาจาก </th>
                      <td mat-cell *matCellDef="let element"> {{element.origin}} </td>
                    </ng-container>

                    <ng-container matColumnDef="treat_at">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> รักษาที่ </th>
                      <td mat-cell *matCellDef="let element"> {{element.treat_at}} </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> สถานะ </th>
                      <td mat-cell *matCellDef="let element" [style.color]="element.status_color"> {{element.status}} </td>
                    </ng-container>

                    <ng-container matColumnDef="job">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> อาชีพ </th>
                      <td mat-cell *matCellDef="let element"> {{element.job}} </td>
                    </ng-container>

                    <ng-container matColumnDef="gender">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> เพศ </th>
                      <td mat-cell *matCellDef="let element"> {{element.gender}} </td>
                    </ng-container>

                    <ng-container matColumnDef="age">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> อายุ (ปี) </th>
                      <td mat-cell *matCellDef="let element"> {{element.age}} </td>
                    </ng-container>

                    <ng-container matColumnDef="type">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> ประเภท </th>
                      <td mat-cell *matCellDef="let element" [style.color]="element.type_color"> {{element.type}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="patientInformationDisplayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: patientInformationDisplayedColumns;"></tr>
                  </table>

                  <mat-paginator #patientInformationPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
        
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <h2 class="head">ทั่วโลก</h2>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p class="text-right margin-text">{{ globleLastUpdated }}</p>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                 <p class="text-center font-size-26">ผู้ติดเชื้อ</p>
                <p class="infected-person confirmed text-center">{{ total.confirmed.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <p class="text-center font-size-26">กำลังอยู่ในการรักษา</p>
                <p class="infected-person healings text-center">{{ total.healings.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <p class="text-center font-size-26">รักษาหายแล้ว</p>
                <p class="infected-person recovered text-center">{{ total.recovered.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
            <mat-card class="card-text-data">
              <mat-card-content>
                <p class="text-center font-size-26">เสียชีวิต</p>
                <p class="infected-person deaths text-center">{{ total.deaths.toLocaleString('en') }}</p>
                <h4 class="text-center">คน</h4>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center font-size-26">เปรียบเทียบอัตราส่วน</p>
                <canvas baseChart
                  [options]="pieChartOptions"
                  [data]="pieChartData"
                  [labels]="pieChartLabels"
                  [chartType]="pieChartType"
                  [colors]="pieChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center font-size-26">ข้อมูลย้อนหลัง <strong class="font-size-26 color-7">7</strong> วัน</p>
                <canvas baseChart
                  [datasets]="barChartData"
                  [labels]="barChartLabels"
                  [options]="barChartOptions"
                  [chartType]="barChartType"
                  [colors]="barChartColors">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center font-size-26">ข้อมูลแบบแยกประเทศ</p>
                <mat-form-field>
                  <mat-label>ค้นหา...</mat-label>
                  <input matInput (keyup)="searchAllCountry($event)" placeholder="ตัวอย่าง. Thailand">
                </mat-form-field>
                <div class="mat-elevation-z8">
                  <table mat-table #allCountry [dataSource]="allCountryDataSource" matSort matSortActive="confirmed" matSortDirection="desc">

                    <ng-container matColumnDef="country_flag">
                      <th mat-header-cell *matHeaderCellDef></th>
                      <td mat-cell *matCellDef="let element">
                        <div [style.background-image]="'url(' + element.country_flag + ')'" class="country-flag"></div>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="country">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> ประเทศ </th>
                      <td mat-cell *matCellDef="let element"> {{element.country}} </td>
                    </ng-container>

                    <ng-container matColumnDef="travel">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> การเดินทาง </th>
                      <td mat-cell *matCellDef="let element" [style.color]="element.travel_color"> {{element.travel}} </td>
                    </ng-container>

                    <ng-container matColumnDef="confirmed">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> ติดเชื้อ </th>
                      <td mat-cell *matCellDef="let element"> {{element.confirmed.toLocaleString('en')}} </td>
                    </ng-container>

                    <ng-container matColumnDef="healings">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> กำลังอยู่ในการรักษา </th>
                      <td mat-cell *matCellDef="let element"> {{element.healings.toLocaleString('en')}} </td>
                    </ng-container>

                    <ng-container matColumnDef="recovered">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> หายแล้ว </th>
                      <td mat-cell *matCellDef="let element"> {{element.recovered.toLocaleString('en')}} </td>
                    </ng-container>

                    <ng-container matColumnDef="deaths">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> เสียชีวิต </th>
                      <td mat-cell *matCellDef="let element"> {{element.deaths.toLocaleString('en')}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="allCountryDisplayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: allCountryDisplayedColumns;"></tr>
                  </table>

                  <mat-paginator #allCountryPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-qr-code">
              <mat-card-content>
                <p class="text-center font-size-26"><strong class="font-size-26 color-line">Line</strong> Bot QR Code</p>
                <img src="/LineBotQRCode.png" class="qrcode">
                <p class="text-center">Line Bot ชื่อ : Covid19</p>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <mat-card class="card-chart">
              <mat-card-content>
                <p class="text-center">พัฒนาโดย 
                  <a href="https://github.com/Saharak-Dove"><strong>Saharak Manoo</strong></a> 
                  ใช้ข้อมูลจาก <a href="https://github.com/CSSEGISandData/COVID-19">CSSEGISandData</a>
                  และ <a href="https://covid19.workpointnews.com/">Workpointnews</a>
                </p>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>